sap.ui.define(["./BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/table/TablePersoController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType"],function(e,t,n,o,s,i,r){"use strict";return e.extend("com.dhi.cms.cmsadmin.controller.Templates",{onInit:function(){this.getRouter().getRoute("Templates").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:async function(e){await this._refreshTable();this._setPersonalization();this.clearAllFilters()},onTableFilter:function(){this.clearAllFilters()},clearAllFilters:function(){var e=this.byId("tblTemplates");var t=null;var n=e.getColumns();for(var o=0;o<n.length;o++){e.filter(n[o],null)}this.byId("tblTemplates").getBinding("rows").filter(t,"Application")},onTemplateDelete:function(e){let o=this.getResourceBundle();let s=e.getSource().getBindingContext().getObject().name;t.warning(o.getText("templateDeleteWarning",[s]),{icon:t.Icon.WARNING,actions:[t.Action.YES,t.Action.NO],emphasizedAction:t.Action.YES,initialFocus:t.Action.NO,dependentOn:this.getView(),onClose:i=>{if(i==="YES"){var r=this.byId("tblTemplates");r.setBusyIndicatorDelay(0);r.setBusy(true);e.getSource().getBindingContext().delete("$auto").then(function(){n.show(o.getText("templateDeleteSuccess",[s]));this._refreshTable();r.setBusy(false)}.bind(this),function(e){t.error(o.getText("templateDeleteError",[s]));r.setBusy(false)})}}})},onTemplateEdit:function(e){let t=e.getSource().getBindingContext();let{ID:n}=t.getObject();``;this.getRouter().navTo("Create Template",{templateId:n})},_refreshTable:function(){debugger;this.byId("tblTemplates").getBinding("rows").refresh()},_setPersonalization:function(){var e,t,n={oPersoData:{_persoSchemaVersion:"1.0",aColumns:[]},getPersData:function(){t=new jQuery.Deferred;if(!this._oBundle){this._oBundle=this.oPersoData}e=this._oBundle;t.resolve(e);return t.promise()},setPersData:function(e){t=new jQuery.Deferred;this._oBundle=e;t.resolve();return t.promise()},delPersData:function(){t=new jQuery.Deferred;t.resolve();return t.promise()}};if(this.oTablePersoController){this.oTablePersoController.destroy()}this.oTablePersoController=new o({table:this.byId("tblTemplates"),persoService:n})},onPersonalization:function(){this.oTablePersoController.openDialog()},onRowsUpdated:function(){var e=this.byId("tblTemplates");this.getModel("appModel").setProperty("/TemplateCount",e.getBinding("rows").getLength())}})});
//# sourceMappingURL=Templates.controller.js.map