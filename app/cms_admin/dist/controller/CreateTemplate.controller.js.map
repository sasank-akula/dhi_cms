{"version":3,"file":"CreateTemplate.controller.js","names":["sap","ui","define","BaseController","Fragment","Filter","FilterOperator","MessageToast","MessageBox","extend","onInit","this","getRouter","getRoute","attachPatternMatched","_onObjectMatched","oEvent","sRouteName","getParameter","oArgs","templateId","isEditMode","getModel","setProperty","_updateBreadcrumbs","_fnRegisterMessageManager","sTitle","getResourceBundle","getText","getView","byId","setText","templateRankLogic","_fnReadExistingTemplate","_fnReadAttributeGroup","refresh","oTreeTable","oFilter","model","GT","oBindingInfo","path","parameters","arrayNames","filters","bindRows","mergeAttributeGroups","oldAttributeGroups","newAttributeGroups","attributeGrpMap","Map","map","attrGrp","name","forEach","newAttrGrp","has","push","existingAttrGrp","get","Object","assign","that","oModel","bindList","undefined","$$updateGroupId","$expand","requestContexts","then","aContexts","oContext","getObject","group","attributes","attr","attribute","desc","currentAttributeGroups","getProperty","currentAttributeGroupsMap","filteredNewAttributeGroups","filter","Rank","catch","oError","console","error","sPath","oParameters","oBindingContext","bindContext","requestObject","oData","Array","isArray","attribute_groups","sortID","attrWrapper","flattenedAttr","sort","a","b","onAddAttributeGroup","oView","_pDialog","load","id","getId","controller","oDialog","addDependent","oAppModel","aAssociatedAttributeGroups","_iRankCounter","length","Math","max","hasSortID","some","open","onDropSelected","oDragged","oDropped","sDropPosition","oTable","aData","aRankedData","item","iDraggedIndex","indexOfItem","iDroppedIndex","oDraggedData","splice","i","found","find","rankItem","ID","onSave","bValid","templateName","getValue","templateDesc","setValueState","setValueStateText","handleSaveTemplate","onNavigation","onSearch","sValue","Contains","oBinding","oBundle","getData","Template","AttributeGroups","payload","attrGroup","attributeGroupsPayload","attribute_groups_ID","oListBinding","resetChanges","create","bSkipRefresh","_refreshMessageManager","submitBatch","response","aMessages","oErrorMessage","slice","reverse","message","type","sNewGroupPath","getPath","newTemplateId","extractIdFromPath","success","setTimeout","template_id","read","update","oResponse","statusCode","JSON","parse","responseText","value","match","onDialogClose","aSelectedNames","oAssociatedAttributeGroupsMap","oObject","bind","aSelectedCount","aRankedAttributeGroupsCount","oTitle","getHeaderToolbar","getContent","show","oSource","getSource","getBinding","onDeleteAttributeGroup","oButton","getBindingContext","iIndex","parseInt","split","pop","index","existingItem","rankedItem","iNewCount"],"sources":["CreateTemplate-dbg.controller.js"],"mappings":"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","ignoreList":[]}