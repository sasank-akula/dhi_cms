sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/Link","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,n,o){"use strict";return e.extend("com.dhi.cms.cmsrequester.controller.BaseController",{getRouter:function(){return this.getOwnerComponent().getRouter()},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},_getFragmentId:function(e,t,n){return e+`---${t}--${n}`},onNavigation:function(e){var t=this.getOwnerComponent().getRouter();var e;if(e){t.navTo(e)}else{console.error("Navigation target not defined.")}},confirmAction:function(e,t){let n=new Promise((n,i)=>{let r=[o.Action.YES,o.Action.NO];if(t){r=t}o.confirm(e,{actions:r,emphasizedAction:o.Action.YES,onClose:e=>{if(e===o.Action.YES){n(e)}},dependentOn:this.getView()})});return n},getBusyDialog:function(){if(!this._oBusyDialog){this._oBusyDialog=sap.ui.xmlfragment(this.getView().getController().createId("busyDialogId"),"com.dhi.cms.cmsrequester.fragments.BusyDialog",this);this.getView().addDependent(this._oBusyDialog)}return this._oBusyDialog},getAppModulePathBaseURL:function(){var e=this.getOwnerComponent().getManifestEntry("/sap.app/id");var t=e.replaceAll(".","/");var n=jQuery.sap.getModulePath(t);return n},getText:function(e,t){let n=this.getResourceBundle();return n.getText(e,t)},ODataPost:function(e,t){return new Promise((n,o)=>{let i=this.getView().getModel();let r=i.bindList(e);let s=r.create(t);s.created().then(()=>{try{let e=s.getObject();console.log("New entity created:",e);if(e&&e.ID){console.log("New ID:",e);n(e.ID)}else{o("No ID returned from backend")}}catch(e){o(e)}}).catch(e=>{console.error("Create failed:",e);o(e)})})},_getfiledata:async function(e){let t={};t.file_name=e.getFileName();let n=await this.getBase64(e._oFileObject);t.media_type=this.getFileType(n.split(",")[0]);t.file_content=n.split(",")[1];return t},getBase64:function(e){return new Promise((t,n)=>{var o=new FileReader;o.readAsDataURL(e);o.onload=function(){t(o.result)}})},deleteFile:function(e){return e.delete()},getFileType:function(e){const t=/data:([^;]+);base64/;const n=e.match(t);if(n){return n[1]}else{return"unknown"}},_getCombovalues:async function(e){let t=this.getModel();let n="/Attributes('"+e+"')";let o=t.bindContext(n,undefined,{$expand:"combovalues"});let i=await o.requestObject().then(function(e){console.log(e);return e});return i}})});
//# sourceMappingURL=BaseController.js.map