{"version":3,"file":"CreateTemplate.controller.js","names":["sap","ui","define","BaseController","Fragment","Filter","FilterOperator","MessageToast","MessageBox","extend","onInit","this","getRouter","getRoute","attachPatternMatched","_onObjectMatched","oEvent","sRouteName","getParameter","oArgs","templateId","_fnReadExistingTemplate","_fnReadAttributeGroup","getModel","setProperty","isEditMode","_fnRegisterMessageManager","sTitle","getResourceBundle","getText","getView","byId","setText","templateRankLogic","refresh","oTreeTable","oFilter","model","GT","oBindingInfo","path","parameters","arrayNames","filters","bindRows","mergeAttributeGroups","oldAttributeGroups","newAttributeGroups","attributeGrpMap","Map","map","attrGrp","name","forEach","newAttrGrp","has","push","existingAttrGrp","get","Object","assign","that","oModel","Promise","resolve","reject","bindList","undefined","$$updateGroupId","$expand","requestContexts","then","aContexts","oContext","getObject","group","attributes","attr","attribute","desc","currentAttributeGroups","getProperty","currentAttributeGroupsMap","filteredNewAttributeGroups","filter","Rank","catch","oError","console","error","sPath","oParameters","oBindingContext","bindContext","requestObject","oData","Array","isArray","attribute_groups","sortID","attrWrapper","flattenedAttr","sort","a","b","onAddAttributeGroup","oView","setBusyIndicatorDelay","setBusy","_pDialog","load","id","getId","controller","oDialog","addDependent","oAppModel","aAssociatedAttributeGroups","_iRankCounter","length","Math","max","hasSortID","some","clearSelection","open","onDropSelected","oDragged","oDropped","sDropPosition","oTable","aData","aRankedData","item","iDraggedIndex","indexOfItem","iDroppedIndex","oDraggedData","splice","i","found","find","rankItem","ID","onSave","async","bValid","oNameInput","oDescInput","templateName","getValue","templateDesc","nameMaxLen","getMaxLength","trim","setValueState","setValueStateText","descMaxLen","handleSaveTemplate","err","onSearch","sValue","Contains","oBinding","oBundle","getData","Template","AttributeGroups","payload","attrGroup","attributeGroupsPayload","attribute_groups_ID","Error","resetChanges","oListBinding","create","bSkipRefresh","_refreshMessageManager","submitBatch","response","aMessages","oErrorMessage","slice","reverse","message","type","backendMsg","e","toLowerCase","startsWith","sNewGroupPath","getPath","newTemplateId","extractIdFromPath","setTimeout","template_id","success","actions","Action","OK","onClose","oAction","onNavigation","read","update","oResponse","JSON","parse","responseText","value","match","onDialogClose","aSelectedNames","oAssociatedAttributeGroupsMap","oObject","bind","aSelectedCount","aRankedAttributeGroupsCount","show","oSource","getSource","getBinding","onDeleteAttributeGroup","oButton","getBindingContext","iIndex","parseInt","split","pop","index"],"sources":["CreateTemplate-dbg.controller.js"],"mappings":"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","ignoreList":[]}