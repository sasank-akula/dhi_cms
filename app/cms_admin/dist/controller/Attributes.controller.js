sap.ui.define(["./BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/table/TablePersoController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","../model/formatter"],(e,t,r,i,o,s,n,l)=>{"use strict";return e.extend("com.dhi.cms.cmsadmin.controller.Attributes",{formatter:l,onInit:function(){this.getRouter().getRoute("Attributes").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:async function(e){debugger;await this._refreshTable();this._setPersonalization();this.clearAllFilters()},onAttributeDelete:function(e){let i=this.getResourceBundle();var o=e.getSource().getBindingContext().getObject().name;let s=i.getText("attributeDeleteConfirmationMessage",[o]);t.warning(s,{icon:t.Icon.WARNING,actions:[t.Action.YES,t.Action.NO],emphasizedAction:t.Action.YES,initialFocus:t.Action.NO,dependentOn:this.getView(),onClose:s=>{if(s==="YES"){var n=this.byId("tblAttributes");n.setBusyIndicatorDelay(0);n.setBusy(true);e.getSource().getBindingContext().delete("$auto").then(function(){let e=i.getText("attributeDeleteSuccessMessage",[o]);r.show(e);this._refreshTable();n.setBusy(false)}.bind(this),function(e){let r=i.getText("attributeDeleteErrorMessage",[o]);t.error(r);n.setBusy(false)})}}})},_refreshTable:function(){debugger;this.byId("tblAttributes").getBinding("rows").refresh()},onAttributeEdit:function(e){let t=e.getSource().getBindingContext();let{ID:r}=t.getObject();this.getRouter().navTo("Create Attributes",{attributeId:r})},onClearFilters:function(){this.clearAllFilters()},clearAllFilters:function(){var e=this.byId("tblAttributes");var t=null;var r=e.getColumns();for(var i=0;i<r.length;i++){e.filter(r[i],null)}this.byId("tblAttributes").getBinding("rows").filter(t,"Application")},_setPersonalization:function(){var e,t,r={oPersoData:{_persoSchemaVersion:"1.0",aColumns:[]},getPersData:function(){t=new jQuery.Deferred;if(!this._oBundle){this._oBundle=this.oPersoData}e=this._oBundle;t.resolve(e);return t.promise()},setPersData:function(e){t=new jQuery.Deferred;this._oBundle=e;t.resolve();return t.promise()},delPersData:function(){t=new jQuery.Deferred;t.resolve();return t.promise()}};if(this.oTablePersoController){this.oTablePersoController.destroy()}this.oTablePersoController=new i({table:this.byId("tblAttributes"),persoService:r})},onPersonalization:function(){this.oTablePersoController.openDialog()},onRowsUpdated:function(){var e=this.byId("tblAttributes");this.getModel("appModel").setProperty("/AttributeCount",e.getBinding("rows").getLength())}})});
//# sourceMappingURL=Attributes.controller.js.map