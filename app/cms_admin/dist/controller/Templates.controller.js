sap.ui.define(["./BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/table/TablePersoController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType"],function(e,t,i,n,r,l,o){"use strict";return e.extend("com.dhi.cms.cmsadmin.controller.Templates",{onInit:function(){this.getRouter().getRoute("Templates").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){this._refreshTable();this._setPersonalization();this.clearAllFilters()},onClearFilters:function(){this.byId("clearFilters").setEnabled(false);this.clearAllFilters()},clearAllFilters:function(){var e=this.byId("tblTemplates");var t=null;var i=e.getColumns();for(var n=0;n<i.length;n++){e.filter(i[n],null)}this.byId("tblTemplates").getBinding("rows").filter(t,"Application")},onTableFilter:function(e){var t=e.getParameter("value");var i=this.byId("tblTemplates");var n=i.getBinding("rows");if(t){this.byId("clearFilters").setEnabled(true);var l=i.getColumns();var o=[];l.forEach(function(e){var i=e.getFilterProperty();if(i){var n=new r({path:i,operator:sap.ui.model.FilterOperator.Contains,value1:t,caseSensitive:false});o.push(n)}});var s=new sap.ui.model.Filter({filters:o,and:false});n.filter(s,sap.ui.model.FilterType.Application);e.preventDefault()}else{this.byId("clearFilters").setEnabled(false);n.filter([],sap.ui.model.FilterType.Application)}},onTemplateDelete:function(e){let n=this.getResourceBundle();let r=e.getSource().getBindingContext().getObject().name;t.warning(n.getText("templateDeleteWarning",[r]),{icon:t.Icon.WARNING,actions:[t.Action.YES,t.Action.NO],emphasizedAction:t.Action.YES,initialFocus:t.Action.NO,dependentOn:this.getView(),onClose:l=>{if(l==="YES"){e.getSource().getBindingContext().delete("$auto").then(function(){i.show(n.getText("templateDeleteSuccess",[r]));this._refreshTable()}.bind(this),function(e){t.error(n.getText("templateDeleteError",[r]))})}}})},onTemplateEdit:function(e){let t=e.getSource().getBindingContext();let{ID:i}=t.getObject();this.getRouter().navTo("Create Template",{templateId:i})},_refreshTable:function(){this.byId("tblTemplates").getBinding("rows").refresh()},_setPersonalization:function(){var e,t,i={oPersoData:{_persoSchemaVersion:"1.0",aColumns:[]},getPersData:function(){t=new jQuery.Deferred;if(!this._oBundle){this._oBundle=this.oPersoData}e=this._oBundle;t.resolve(e);return t.promise()},setPersData:function(e){t=new jQuery.Deferred;this._oBundle=e;t.resolve();return t.promise()},delPersData:function(){t=new jQuery.Deferred;t.resolve();return t.promise()}};this.oTablePersoController=new n({table:this.byId("tblTemplates"),persoService:i})},onPersonalization:function(){this.oTablePersoController.openDialog()},onRowsUpdated:function(){var e=this.byId("tblTemplates");this.getModel("appModel").setProperty("/TemplateCount",e.getBinding("rows").getLength())}})});
//# sourceMappingURL=Templates.controller.js.map