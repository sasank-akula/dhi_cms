sap.ui.define(["./BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/table/TablePersoController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType"],(e,t,i,r,n,s,o)=>{"use strict";return e.extend("com.dhi.cms.cmsadmin.controller.Attributes",{onInit:function(){this.getRouter().getRoute("Attributes").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){this._refreshTable();this._setPersonalization();this.clearAllFilters()},onAttributeDelete:function(e){let r=this.getResourceBundle();var n=e.getSource().getBindingContext().getObject().name;let s=r.getText("attributeDeleteConfirmationMessage",[n]);t.warning(s,{icon:t.Icon.WARNING,actions:[t.Action.YES,t.Action.NO],emphasizedAction:t.Action.YES,initialFocus:t.Action.NO,dependentOn:this.getView(),onClose:s=>{if(s==="YES"){e.getSource().getBindingContext().delete("$auto").then(function(){let e=r.getText("attributeDeleteSuccessMessage",[n]);i.show(e);this._refreshTable()}.bind(this),function(e){let i=r.getText("attributeDeleteErrorMessage",[n]);t.error(i)})}}})},_refreshTable:function(){this.byId("tblAttributes").getBinding("rows").refresh()},onAttributeEdit:function(e){let t=e.getSource().getBindingContext();let{ID:i}=t.getObject();this.getRouter().navTo("Create Attributes",{attributeId:i})},onClearFilters:function(){this.byId("clearFilters").setEnabled(false);this.clearAllFilters()},clearAllFilters:function(){var e=this.byId("tblAttributes");var t=null;var i=e.getColumns();for(var r=0;r<i.length;r++){e.filter(i[r],null)}this.byId("tblAttributes").getBinding("rows").filter(t,"Application")},onTableFilter:function(e){var t=e.getParameter("value");var i=this.byId("tblAttributes");var r=i.getBinding("rows");if(t){this.byId("clearFilters").setEnabled(true);var s=i.getColumns();var o=[];s.forEach(function(e){var i=e.getFilterProperty();if(i){var r=new n({path:i,operator:sap.ui.model.FilterOperator.Contains,value1:t,caseSensitive:false});o.push(r)}});var l=new sap.ui.model.Filter({filters:o,and:false});r.filter(l,sap.ui.model.FilterType.Application);e.preventDefault()}else{this.byId("clearFilters").setEnabled(false);r.filter([],sap.ui.model.FilterType.Application)}},_setPersonalization:function(){var e,t,i={oPersoData:{_persoSchemaVersion:"1.0",aColumns:[]},getPersData:function(){t=new jQuery.Deferred;if(!this._oBundle){this._oBundle=this.oPersoData}e=this._oBundle;t.resolve(e);return t.promise()},setPersData:function(e){t=new jQuery.Deferred;this._oBundle=e;t.resolve();return t.promise()},delPersData:function(){t=new jQuery.Deferred;t.resolve();return t.promise()}};this.oTablePersoController=new r({table:this.byId("tblAttributes"),persoService:i})},onPersonalization:function(){this.oTablePersoController.openDialog()},onRowsUpdated:function(){var e=this.byId("tblAttributes");this.getModel("appModel").setProperty("/AttributeCount",e.getBinding("rows").getLength())}})});
//# sourceMappingURL=Attributes.controller.js.map